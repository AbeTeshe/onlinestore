{"ast":null,"code":"import _objectSpread from \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/src/components/CheckoutForm/AddressForm.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/node_modules/@babel/runtime/regenerator/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { InputLabel, Select, MenuItem, Button, Grid, Typography } from \"@material-ui/core\";\nimport { useForm, FormProvider } from \"react-hook-form\";\nimport { Link } from \"react-router-dom\";\nimport { commerce } from \"../../lib/commerce\";\nimport FormInput from \"./CustomTextField\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar AddressForm = function AddressForm(_ref) {\n  _s();\n\n  var checkoutToken = _ref.checkoutToken,\n      next = _ref.next;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      shippingCountries = _useState2[0],\n      setShippingCountries = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      shippingCountry = _useState4[0],\n      setShippingCountry = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      shippingSubdivisions = _useState6[0],\n      setShippingSubdivisions = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      shippingSubdivision = _useState8[0],\n      setShippingSubdivision = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      shippingOptions = _useState10[0],\n      setShippingOptions = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      shippingOption = _useState12[0],\n      setShippingOption = _useState12[1];\n\n  var methods = useForm();\n  var countries = Object.entries(shippingCountries).map(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        code = _ref3[0],\n        name = _ref3[1];\n\n    return {\n      id: code,\n      label: name\n    };\n  });\n  var subdivisions = Object.entries(shippingSubdivisions).map(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        code = _ref5[0],\n        name = _ref5[1];\n\n    return {\n      id: code,\n      label: name\n    };\n  });\n  var options = shippingOptions.map(function (sO) {\n    return {\n      id: sO.id,\n      label: \"\".concat(sO.description, \" - (\").concat(sO.price.formatted_with_symbol, \")\")\n    };\n  });\n\n  var fetchShippingCountries = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(checkoutTokenId) {\n      var _yield$commerce$servi, countries;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return commerce.services.localeListShippingCountries(checkoutTokenId);\n\n            case 2:\n              _yield$commerce$servi = _context.sent;\n              countries = _yield$commerce$servi.countries;\n              // [AL, BT, GB]\n              setShippingCountries(countries);\n              setShippingCountry(Object.keys(countries)[0]);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchShippingCountries(_x) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var fetchSubdivisions = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(countryCode) {\n      var _yield$commerce$servi2, subdivisions;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return commerce.services.localeListSubdivisions(countryCode);\n\n            case 2:\n              _yield$commerce$servi2 = _context2.sent;\n              subdivisions = _yield$commerce$servi2.subdivisions;\n              setShippingSubdivisions(subdivisions);\n              setShippingSubdivision(Object.keys(subdivisions)[0]);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function fetchSubdivisions(_x2) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var fetchShippingOptions = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(checkoutTokenId, country) {\n      var region,\n          options,\n          _args3 = arguments;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              region = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : null;\n              _context3.next = 3;\n              return commerce.checkout.getShippingOptions(checkoutTokenId, {\n                country: country,\n                region: region\n              });\n\n            case 3:\n              options = _context3.sent;\n              setShippingOptions(options);\n              setShippingOption(options[0].id);\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function fetchShippingOptions(_x3, _x4) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchShippingCountries(checkoutToken.id);\n  }, []);\n  useEffect(function () {\n    if (shippingCountry) fetchSubdivisions(shippingCountry);\n  }, [shippingCountry]);\n  useEffect(function () {\n    if (shippingSubdivision) fetchShippingOptions(checkoutToken.id, shippingCountry, shippingSubdivision);\n  }, [shippingSubdivision]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: \"Shipping Address\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(FormProvider, _objectSpread(_objectSpread({}, methods), {}, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: methods.handleSubmit(function (data) {\n          return next(_objectSpread(_objectSpread({}, data), {}, {\n            shippingCountry: shippingCountry,\n            shippingSubdivision: shippingSubdivision,\n            shippingOption: shippingOption\n          }));\n        }),\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(FormInput, {\n            required: true,\n            name: \"firstName\",\n            label: \"First Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n            required: true,\n            name: \"lastName\",\n            label: \"Last Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n            required: true,\n            name: \"address1\",\n            label: \"Address Line 1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n            required: true,\n            name: \"email\",\n            label: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n            required: true,\n            name: \"city\",\n            label: \"City\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(FormInput, {\n            required: true,\n            name: \"zip\",\n            label: \"Zip / Postal code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Shipping Country\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Select, {\n              value: shippingCountry,\n              fullWidth: true,\n              onChange: function onChange(e) {\n                return setShippingCountry(e.target.value);\n              },\n              children: countries.map(function (country) {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: country.id,\n                  children: country.label\n                }, country.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 19\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Shipping Subdivision\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Select, {\n              value: shippingSubdivision,\n              fullWidth: true,\n              onChange: function onChange(e) {\n                return setShippingSubdivision(e.target.value);\n              },\n              children: subdivisions.map(function (subdivision) {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: subdivision.id,\n                  children: subdivision.label\n                }, subdivision.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Shipping Options\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(Select, {\n              value: shippingOption,\n              fullWidth: true,\n              onChange: function onChange(e) {\n                return setShippingOption(e.target.value);\n              },\n              children: options.map(function (option) {\n                return /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: option.id,\n                  children: option.label\n                }, option.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 19\n                }, _this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            component: Link,\n            to: \"/cart\",\n            variant: \"outlined\",\n            children: \"Back to cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            children: \"Next\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, _this)\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(AddressForm, \"j4DKKHVTXcRtPh0HagHJVpgoNEs=\", false, function () {\n  return [useForm];\n});\n\n_c = AddressForm;\nexport default AddressForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddressForm\");","map":{"version":3,"sources":["/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/src/components/CheckoutForm/AddressForm.jsx"],"names":["React","useState","useEffect","InputLabel","Select","MenuItem","Button","Grid","Typography","useForm","FormProvider","Link","commerce","FormInput","AddressForm","checkoutToken","next","shippingCountries","setShippingCountries","shippingCountry","setShippingCountry","shippingSubdivisions","setShippingSubdivisions","shippingSubdivision","setShippingSubdivision","shippingOptions","setShippingOptions","shippingOption","setShippingOption","methods","countries","Object","entries","map","code","name","id","label","subdivisions","options","sO","description","price","formatted_with_symbol","fetchShippingCountries","checkoutTokenId","services","localeListShippingCountries","keys","fetchSubdivisions","countryCode","localeListSubdivisions","fetchShippingOptions","country","region","checkout","getShippingOptions","handleSubmit","data","e","target","value","subdivision","option","display","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  InputLabel,\n  Select,\n  MenuItem,\n  Button,\n  Grid,\n  Typography\n} from \"@material-ui/core\";\nimport { useForm, FormProvider } from \"react-hook-form\";\n\nimport { Link } from \"react-router-dom\";\nimport { commerce } from \"../../lib/commerce\";\nimport FormInput from \"./CustomTextField\";\n\nconst AddressForm = ({ checkoutToken, next }) => {\n  const [shippingCountries, setShippingCountries] = useState([]);\n  const [shippingCountry, setShippingCountry] = useState(\"\");\n  const [shippingSubdivisions, setShippingSubdivisions] = useState([]);\n  const [shippingSubdivision, setShippingSubdivision] = useState(\"\");\n  const [shippingOptions, setShippingOptions] = useState([]);\n  const [shippingOption, setShippingOption] = useState(\"\");\n\n  const methods = useForm();\n\n  const countries = Object.entries(shippingCountries).map(([code, name]) => ({\n    id: code,\n    label: name\n  }));\n\n  const subdivisions = Object.entries(shippingSubdivisions).map(\n    ([code, name]) => ({\n      id: code,\n      label: name\n    })\n  );\n\n  const options = shippingOptions.map((sO) => ({\n    id: sO.id,\n    label: `${sO.description} - (${sO.price.formatted_with_symbol})`\n  }));\n\n  const fetchShippingCountries = async (checkoutTokenId) => {\n    const { countries } = await commerce.services.localeListShippingCountries(\n      checkoutTokenId\n    );\n\n    // [AL, BT, GB]\n    setShippingCountries(countries);\n    setShippingCountry(Object.keys(countries)[0]);\n  };\n\n  const fetchSubdivisions = async (countryCode) => {\n    const { subdivisions } = await commerce.services.localeListSubdivisions(\n      countryCode\n    );\n\n    setShippingSubdivisions(subdivisions);\n    setShippingSubdivision(Object.keys(subdivisions)[0]);\n  };\n\n  const fetchShippingOptions = async (\n    checkoutTokenId,\n    country,\n    region = null\n  ) => {\n    const options = await commerce.checkout.getShippingOptions(\n      checkoutTokenId,\n      { country, region }\n    );\n\n    setShippingOptions(options);\n    setShippingOption(options[0].id);\n  };\n\n  useEffect(() => {\n    fetchShippingCountries(checkoutToken.id);\n  }, []);\n\n  useEffect(() => {\n    if (shippingCountry) fetchSubdivisions(shippingCountry);\n  }, [shippingCountry]);\n\n  useEffect(() => {\n    if (shippingSubdivision)\n      fetchShippingOptions(\n        checkoutToken.id,\n        shippingCountry,\n        shippingSubdivision\n      );\n  }, [shippingSubdivision]);\n\n  return (\n    <>\n      <Typography variant=\"h6\" gutterBottom>\n        Shipping Address\n      </Typography>\n\n      <FormProvider {...methods}>\n        <form\n          onSubmit={methods.handleSubmit((data) =>\n            next({\n              ...data,\n              shippingCountry,\n              shippingSubdivision,\n              shippingOption\n            })\n          )}\n        >\n          <Grid container spacing={3}>\n            <FormInput required name=\"firstName\" label=\"First Name\" />\n            <FormInput required name=\"lastName\" label=\"Last Name\" />\n            <FormInput required name=\"address1\" label=\"Address Line 1\" />\n            <FormInput required name=\"email\" label=\"Email\" />\n            <FormInput required name=\"city\" label=\"City\" />\n            <FormInput required name=\"zip\" label=\"Zip / Postal code\" />\n            <Grid item xs={12} sm={6}>\n              <InputLabel>Shipping Country</InputLabel>\n              <Select\n                value={shippingCountry}\n                fullWidth\n                onChange={(e) => setShippingCountry(e.target.value)}\n              >\n                {countries.map((country) => (\n                  <MenuItem key={country.id} value={country.id}>\n                    {country.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </Grid>\n\n            <Grid item xs={12} sm={6}>\n              <InputLabel>Shipping Subdivision</InputLabel>\n              <Select\n                value={shippingSubdivision}\n                fullWidth\n                onChange={(e) => setShippingSubdivision(e.target.value)}\n              >\n                {subdivisions.map((subdivision) => (\n                  <MenuItem key={subdivision.id} value={subdivision.id}>\n                    {subdivision.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </Grid>\n\n            <Grid item xs={12} sm={6}>\n              <InputLabel>Shipping Options</InputLabel>\n              <Select\n                value={shippingOption}\n                fullWidth\n                onChange={(e) => setShippingOption(e.target.value)}\n              >\n                {options.map((option) => (\n                  <MenuItem key={option.id} value={option.id}>\n                    {option.label}\n                  </MenuItem>\n                ))}\n              </Select>\n            </Grid>\n          </Grid>\n          <br />\n\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n            <Button component={Link} to=\"/cart\" variant=\"outlined\">\n              Back to cart\n            </Button>\n            <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n              Next\n            </Button>\n          </div>\n        </form>\n      </FormProvider>\n    </>\n  );\n};\n\nexport default AddressForm;\n"]},"metadata":{},"sourceType":"module"}