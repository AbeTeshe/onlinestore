{"ast":null,"code":"import _asyncToGenerator from \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/src/components/CheckoutForm/Checkout/Checkout.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/node_modules/@babel/runtime/regenerator/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Paper, Stepper, Step, StepLabel, Typography, CircularProgress, Divider, Button } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport { commerce } from \"../../../lib/commerce\";\nimport useStyles from \"./styles\";\nimport AddressForm from \"../AddressForm\";\nimport PaymentForm from \"../PaymentForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar steps = [\"Shipping Address\", \"Payment Details\"];\n\nvar Checkout = function Checkout(_ref) {\n  _s();\n\n  var cart = _ref.cart,\n      order = _ref.order,\n      onCaptureCheckout = _ref.onCaptureCheckout,\n      error = _ref.error;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      checkoutToken = _useState2[0],\n      setCheckoutToken = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeStep = _useState4[0],\n      setActiveStep = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      shippingData = _useState6[0],\n      setShippingData = _useState6[1];\n\n  var classes = useStyles();\n  useEffect(function () {\n    var generateToken = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var token;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return commerce.checkout.generateToken(cart.id, {\n                  type: \"cart\"\n                });\n\n              case 3:\n                token = _context.sent;\n                setCheckoutToken(token);\n                _context.next = 9;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 7]]);\n      }));\n\n      return function generateToken() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    generateToken();\n  }, [cart]);\n\n  var nextStep = function nextStep() {\n    return setActiveStep(function (prevActiveStep) {\n      return prevActiveStep + 1;\n    });\n  };\n\n  var backStep = function backStep() {\n    return setActiveStep(function (prevActiveStep) {\n      return prevActiveStep - 1;\n    });\n  };\n\n  var next = function next(data) {\n    setShippingData(data);\n    nextStep();\n  };\n\n  var Confirmation = function Confirmation() {\n    return order.customer ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: [\"Thank you for your purchase, \", order.customer.firstname, \" \", order.customer.lastname, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Divider, {\n          className: classes.divider\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          children: [\"Order Ref: \", order.customer_reference]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        component: Link,\n        variant: \"outlined\",\n        type: \"button\",\n        to: \"/\",\n        children: \"Back to home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.spinner,\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, _this);\n  };\n\n  if (error) {\n    Confirmation = function Confirmation() {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          component: Link,\n          variant: \"outlined\",\n          type: \"button\",\n          to: \"/\",\n          children: \"Back to home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true);\n    };\n  }\n\n  var Form = function Form() {\n    return activeStep === 0 ? /*#__PURE__*/_jsxDEV(AddressForm, {\n      checkoutToken: checkoutToken,\n      next: next,\n      nextStep: nextStep,\n      setShippingData: setShippingData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, _this) : /*#__PURE__*/_jsxDEV(PaymentForm, {\n      checkoutToken: checkoutToken,\n      nextStep: nextStep,\n      backStep: backStep,\n      shippingData: shippingData,\n      onCaptureCheckout: onCaptureCheckout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.toolbar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: classes.layout,\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        className: classes.paper,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          align: \"center\",\n          children: \"Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Stepper, {\n          activeStep: activeStep,\n          className: classes.stepper,\n          children: steps.map(function (step) {\n            return /*#__PURE__*/_jsxDEV(Step, {\n              children: /*#__PURE__*/_jsxDEV(StepLabel, {\n                children: step\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, _this)\n            }, step, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, _this), activeStep === steps.length ? /*#__PURE__*/_jsxDEV(Confirmation, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, _this) : checkoutToken && /*#__PURE__*/_jsxDEV(Form, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 30\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Checkout, \"FYlRUAxttAZouU8gkWGHBZC+uxo=\", false, function () {\n  return [useStyles];\n});\n\n_c = Checkout;\nexport default Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["/Users/stanley/Desktop/IPFS/Ecommerce/react-ecommerce-main/src/components/CheckoutForm/Checkout/Checkout.jsx"],"names":["React","useState","useEffect","Paper","Stepper","Step","StepLabel","Typography","CircularProgress","Divider","Button","Link","commerce","useStyles","AddressForm","PaymentForm","steps","Checkout","cart","order","onCaptureCheckout","error","checkoutToken","setCheckoutToken","activeStep","setActiveStep","shippingData","setShippingData","classes","generateToken","checkout","id","type","token","nextStep","prevActiveStep","backStep","next","data","Confirmation","customer","firstname","lastname","divider","customer_reference","spinner","Form","toolbar","layout","paper","stepper","map","step","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Paper,\n  Stepper,\n  Step,\n  StepLabel,\n  Typography,\n  CircularProgress,\n  Divider,\n  Button\n} from \"@material-ui/core\";\n\nimport { Link } from \"react-router-dom\";\nimport { commerce } from \"../../../lib/commerce\";\nimport useStyles from \"./styles\";\nimport AddressForm from \"../AddressForm\";\nimport PaymentForm from \"../PaymentForm\";\n\nconst steps = [\"Shipping Address\", \"Payment Details\"];\n\nconst Checkout = ({ cart, order, onCaptureCheckout, error }) => {\n  const [checkoutToken, setCheckoutToken] = useState(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [shippingData, setShippingData] = useState({});\n\n  const classes = useStyles();\n\n  useEffect(() => {\n    const generateToken = async () => {\n      try {\n        const token = await commerce.checkout.generateToken(cart.id, {\n          type: \"cart\"\n        });\n        setCheckoutToken(token);\n      } catch (error) {}\n    };\n    generateToken();\n  }, [cart]);\n\n  const nextStep = () => setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  const backStep = () => setActiveStep((prevActiveStep) => prevActiveStep - 1);\n\n  const next = (data) => {\n    setShippingData(data);\n\n    nextStep();\n  };\n\n  let Confirmation = () =>\n    order.customer ? (\n      <>\n        <div>\n          <Typography variant=\"h5\">\n            Thank you for your purchase, {order.customer.firstname}{\" \"}\n            {order.customer.lastname}!\n          </Typography>\n          <Divider className={classes.divider} />\n          <Typography variant=\"subtitle2\">\n            Order Ref: {order.customer_reference}\n          </Typography>\n        </div>\n        <br />\n        <Button component={Link} variant=\"outlined\" type=\"button\" to=\"/\">\n          Back to home\n        </Button>\n      </>\n    ) : (\n      <div className={classes.spinner}>\n        <CircularProgress />\n      </div>\n    );\n\n  if (error) {\n    Confirmation = () => (\n      <>\n        <Typography variant=\"h5\">Error: {error}</Typography>\n        <br />\n        <Button component={Link} variant=\"outlined\" type=\"button\" to=\"/\">\n          Back to home\n        </Button>\n      </>\n    );\n  }\n\n  const Form = () =>\n    activeStep === 0 ? (\n      <AddressForm\n        checkoutToken={checkoutToken}\n        next={next}\n        nextStep={nextStep}\n        setShippingData={setShippingData}\n      />\n    ) : (\n      <PaymentForm\n        checkoutToken={checkoutToken}\n        nextStep={nextStep}\n        backStep={backStep}\n        shippingData={shippingData}\n        onCaptureCheckout={onCaptureCheckout}\n      />\n    );\n\n  return (\n    <>\n      <div className={classes.toolbar} />\n      <main className={classes.layout}>\n        <Paper className={classes.paper}>\n          <Typography variant=\"h4\" align=\"center\">\n            Checkout\n          </Typography>\n          <Stepper activeStep={activeStep} className={classes.stepper}>\n            {steps.map((step) => (\n              <Step key={step}>\n                <StepLabel>{step}</StepLabel>\n              </Step>\n            ))}\n          </Stepper>\n          {activeStep === steps.length ? (\n            <Confirmation />\n          ) : (\n            checkoutToken && <Form />\n          )}\n        </Paper>\n      </main>\n    </>\n  );\n};\n\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}